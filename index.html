<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Marbles of the Universe</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="src/clickableStar.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <a-asset-item
          id="goksin-island"
          src="/assets/models/goksin-model.glb"
        ></a-asset-item>

        <a-asset-item
          id="glowing-star"
          src="/assets/models/glowingStar.glb"
        ></a-asset-item>

        <img id="nebula-img4" src="/assets/images/nebula4.png" />
        <img id="nebula-img5" src="/assets/images/nebula5.png" />
        <img id="stars-sky" src="/assets/images/starsmilky.jpg" />
      </a-assets>

      <!-- Camera -->
      <a-entity id="cameraRig" position="0 0 3">
        <a-camera fov="80">
          <a-cursor
            fuse="false"
            raycaster="objects: .clickable"
            material="color: white; shader: flat"
            position="0 0 -1"
            geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02"
          ></a-cursor>
        </a-camera>
        <a-entity
          thumbstick-turn="rig: #cameraRig; speed: 60"
          laser-controls="hand: right"
          raycaster="objects: .clickable"
          cursor="fuse: false"
          position="0.2 -0.5 -0.5"
        ></a-entity>

        <a-entity
          id="leftController"
          laser-controls="hand: left"
          raycaster="objects: .clickable"
          cursor="fuse: false"
          thumbstick-movement="speed: 2; movementTarget: #cameraRig"
          position="-0.2 -0.5 -0.5"
        ></a-entity>
      </a-entity>

      <!-- Lighting -->

      <!-- Sky -->
      <a-sky
        src="#stars-sky"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 160000; easing: linear"
      ></a-sky>

      <!-- Opening Quote -->
      <a-entity
        position="0 6 -3"
        animation="property: position; to: 0 5.8 -3; dir: alternate; dur: 3000; loop: true"
      >
        <a-text
          value="In the beginning, play looked a lot like chaos..."
          align="center"
          color="#D6EAF8"
          width="6"
          scale="1.5 1.5 1.5"
        ></a-text>
      </a-entity>

      <!-- Marbles with Synchronized Glow -->
      <a-entity id="marbles">
        <!-- Marble 1 -->
        <a-entity
          id="marble1"
          class="clickable"
          position="-2 2 -3"
          animation="property: position; dir: alternate; dur: 5000; loop: true; to: -2 2.2 -3"
        >
          <a-sphere
            id="marble1-sphere"
            radius="0.35"
            color="#ffffff"
            class="clickable"
          ></a-sphere>

          <a-text
            id="phrase1"
            value="We used to play marbles with atoms"
            align="center"
            color="#D6EAF8"
            width="6"
            visible="false"
            position="-1 3 0"
          ></a-text>
        </a-entity>

        <!-- Marble 2 -->
        <a-entity
          class="clickable"
          id="marble2"
          position="-1 2.3 -3"
          animation="property: position; dir: alternate; dur: 5000; loop: true; to: -1 2 -3"
        >
          <a-sphere
            id="marble2-sphere"
            radius="0.35"
            color="#ffffff"
            opacity="0.9"
            class="clickable"
          ></a-sphere>

          <a-text
            id="phrase2"
            value="A nudge- and things appeared"
            align="center"
            color="#D6EAF8"
            width="6"
            visible="false"
            position="1 2.7 -1.5"
          ></a-text>
        </a-entity>

        <!-- Marble 3 -->
        <a-entity
          class="clickable"
          id="marble3"
          position="0 1.8 -3"
          animation="property: position; dir: alternate; dur: 6000; loop: true; to: 0 2.0 -3"
        >
          <a-sphere
            class="clickable"
            id="marble3-sphere"
            radius="0.35"
            color="#ffffff"
            opacity="0.9"
          ></a-sphere>

          <a-text
            id="phrase3"
            value="Throw one catch three, that's how the universe has started"
            align="center"
            color="#D6EAF8"
            width="6"
            visible="false"
            position="-2 1.8 0.3"
          ></a-text>
        </a-entity>

        <!-- Marble 4 -->
        <a-entity
          class="clickable"
          id="marble4"
          position="1 1.7 -3"
          animation="property: position; dir: alternate; dur: 5500; loop: true; to: 1 1.4 -3"
        >
          <a-sphere
            class="clickable"
            id="marble4-sphere"
            radius="0.35"
            color="#ffffff"
            opacity="0.9"
          ></a-sphere>
          <a-text
            id="phrase4"
            value="To lose a marble was to invent a universe."
            align="center"
            color="#D6EAF8"
            width="6"
            visible="false"
            position="-2 1 0.3"
          ></a-text>
        </a-entity>

        <!-- Marble 5 -->
        <a-entity
          class="clickable"
          id="marble5"
          position="2 1.5 -3"
          animation="property: position; dir: alternate; dur: 4500; loop: true; to: 2 1.2 -3"
        >
          <a-sphere
            class="clickable"
            id="marble5-sphere"
            radius="0.35"
            color="#ffffff"
            opacity="0.9"
          ></a-sphere>

          <a-image
            id="nebula5"
            src="#nebula-img4"
            visible="false"
            position="5 -1 -9"
            scale="25 25 25"
            transparent="true"
            opacity="0"
          ></a-image>

          <a-text
            id="phrase5"
            value="From all that chaos, appeared planets, stars, and galaxies and everything else."
            align="center"
            color="#D6EAF8"
            width="6"
            visible="false"
            position="-1.2 0.6 0.3"
          ></a-text>
        </a-entity>
      </a-entity>

      <!-- Island model (hidden initially) -->
      <a-entity
        id="goksin-island-entity"
        position="0 -1 0"
        gltf-model="#goksin-island"
        scale="0.02 0.02 0.02"
        visible="true"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 90000; easing: linear"
      >
        <a-box
          id="goksin-island-hitbox"
          class="clickable"
          position="0 0 0"
          material="opacity: 0.001; transparent: true"
          scale="40 40 40"
          island-link
        ></a-box>
        ></a-entity
      >
    </a-scene>
  </body>
</html>
